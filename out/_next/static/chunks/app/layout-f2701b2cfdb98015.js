(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2161:function(e,t,i){Promise.resolve().then(i.t.bind(i,2489,23)),Promise.resolve().then(i.t.bind(i,2998,23)),Promise.resolve().then(i.bind(i,6905))},6905:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return u}});var r=i(7437),n=i(64);let l=(0,n.oM)({name:"app",initialState:{display:!0},reducers:{setDisplay:(e,t)=>{e.display=!0}}}),{setDisplay:s}=l.actions;var o=l.reducer;let a=(0,n.xC)({reducer:{app:o},devTools:!1});var d=i(3198);let c=async(e,t,i)=>{try{let r=await fetch("http://".concat("s_notify").concat(e),{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t||{})});if(!i)return;i(await r.json())}catch(e){throw console.log(e),e}};var g=i(2265),m=i(4033),x=i(8336),p=e=>{let{icon:t,color:i="white"}=e,{...n}=x,l=n[t]?n[t]:n.QuestionMarkCircleIcon;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l,{className:"h-6 w-6 mr-2 text-".concat(i,"-200"),"aria-hidden":"true"})})},b=i(7057);function h(e){let{children:t}=e,i=(0,g.useCallback)(e=>{"Escape"===e.key&&c("/close")},[]),n=(0,d.I0)(),l=()=>{let e=new Audio("/out/confirmed.ogg");e.play()},s=(0,g.useCallback)(async e=>{let{type:t,data:i}=e.data;if("CREATE_NOTIFICATION"===t){let{duration:e,color:t,icon:r,image:n,title:s,description:o,small_description:a,play_sound:d,...c}=i;e="number"==typeof e?e:5e3,t=["gray","red","yellow","green","blue","indigo","purple","pink","orange","lime"].includes(t)?t:"gray",s="string"==typeof s&&s.length<=256?s:"Invalid Title",o="string"==typeof o&&o.length<=256?o:"Invalid description",void 0!==a&&(a="string"==typeof a&&a.length<=256?a:"Invalid small description");let g={...c,progress:100,visible:!0,duration:e,color:t,icon:r,image:n,title:s,description:o,small_description:a,play_sound:d};console.log("Received create notification event:",g),!0===g.play_sound&&l(),h(e=>[...e,g])}else t&&"ACTION"!==t&&"PARTIAL_STATE"!==t&&n({type:t,payload:i})},[n]);(0,g.useEffect)(()=>(document.addEventListener("keydown",i),window.addEventListener("message",s),()=>{document.removeEventListener("keydown",i),window.removeEventListener("message",s)}),[s,i]);let o=(0,m.useSearchParams)(),a=(0,d.v9)(e=>e.app.display),[x,h]=(0,g.useState)([]);return((0,g.useEffect)(()=>{let e=setInterval(()=>{h(e=>{let t=0,i=e.map(e=>{if(!(e.progress>0)||!e.visible)return t++,{...e,visible:!1};{let t=100/(e.duration/50);return{...e,progress:e.progress-t}}});return i.map((e,i)=>e.visible?{...e,topPosition:6*i-6*t}:e)})},50);return()=>clearInterval(e)},[]),a||o.get("preview"))?(0,r.jsxs)("div",{className:"h-screen relative",children:[x.map((e,t)=>e.visible&&(0,r.jsx)("div",{className:"mt-4 absolute top-4 right-4",style:{top:"".concat(e.topPosition,"rem"),width:"300px"},children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"p-4 rounded-t-md bg-gradient-to-b from-".concat(e.color,"-500/95 to-gray-800/95 text-white-800 flex items-center"),children:[e.icon?(0,r.jsx)(p,{icon:e.icon,color:e.color}):e.image?(0,r.jsx)("img",{src:e.image,className:"h-10 mr-3"}):(0,r.jsx)(b.Z,{className:"h-6 w-6 mr-2 text-".concat(e.color,"-100")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("a",{className:"font-bold text-".concat(e.color,"-50"),children:e.title}),e.description&&(0,r.jsx)("p",{className:"text-xs text-".concat(e.color,"-100"),children:e.description}),e.small_description&&(0,r.jsx)("p",{className:"text-[10px] text-gray-300 mt-1 ml-4",children:e.small_description})]})]}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1.5 overflow-hidden bg-".concat(e.color,"-900"),children:(0,r.jsx)("div",{className:"bg-".concat(e.color,"-700 rounded-sm h-full text-center text-white font-bold"),style:{width:"".concat(e.progress,"%")}})})]})},t)),(0,r.jsx)("div",{className:"hidden text-gray-200 bg-gray-700 bg-gradient-to-b from-gray-500/95 bg-gray-900 text-gray-100 text-gray-50",children:"Gray"}),(0,r.jsx)("div",{className:"hidden text-red-200 bg-red-700 bg-gradient-to-b from-red-500/95 bg-red-900 text-red-100 text-red-50",children:"Red"}),(0,r.jsx)("div",{className:"hidden text-yellow-200 bg-yellow-700 bg-gradient-to-b from-yellow-500/95 bg-yellow-900 text-yellow-100 text-yellow-50",children:"Yellow"}),(0,r.jsx)("div",{className:"hidden text-green-200 bg-green-700 bg-gradient-to-b from-green-500/95 bg-green-900 text-green-100 text-green-50",children:"Green"}),(0,r.jsx)("div",{className:"hidden text-blue-200 bg-blue-700 bg-gradient-to-b from-blue-500/95 bg-blue-900 text-blue-100 text-blue-50",children:"Blue"}),(0,r.jsx)("div",{className:"hidden text-indigo-200 bg-indigo-700 bg-gradient-to-b from-indigo-500/95 bg-indigo-900 text-indigo-100 text-indigo-50",children:"Indigo"}),(0,r.jsx)("div",{className:"hidden text-purple-200 bg-purple-700 bg-gradient-to-b from-purple-500/95 bg-purple-900 text-purple-100 text-purple-50",children:"Purple"}),(0,r.jsx)("div",{className:"hidden text-pink-200 bg-pink-700 bg-gradient-to-b from-pink-500/95 bg-pink-900 text-pink-100 text-pink-50",children:"Pink"}),(0,r.jsx)("div",{className:"hidden text-orange-200 bg-orange-700 bg-gradient-to-b from-orange-500/95 bg-orange-900 text-orange-100 text-orange-50",children:"Orange"}),(0,r.jsx)("div",{className:"hidden text-lime-200 bg-lime-700 bg-gradient-to-b from-lime-500/95 bg-lime-900 text-lime-100 text-lime-50",children:"Lime"})]}):null}function u(e){let{children:t}=e;return(0,r.jsx)(d.zt,{store:a,children:(0,r.jsx)(h,{children:t})})}},2489:function(){}},function(e){e.O(0,[569,971,472,744],function(){return e(e.s=2161)}),_N_E=e.O()}]);